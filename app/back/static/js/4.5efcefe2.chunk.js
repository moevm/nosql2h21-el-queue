(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[4],{574:function(e,t,a){"use strict";a.r(t);var n=a(7),l=a(8),c=a(10),o=a(9),r=a(0),s=a.n(r),i=a(18),m=a(20),u=(a(12),a(6)),d=a(166),b=a(167),p=a(110),h=a(111),f=a(179),E=a(168),v=a(169);var g=function(e){return s.a.createElement(p.a,{md:4},s.a.createElement("div",{class:"custom-card mb-4 shadow-sm"},s.a.createElement("center",{className:"pt-3"},s.a.createElement("h4",null,e.header)),s.a.createElement("hr",null),s.a.createElement("div",{class:"card-body"},e.description.map((function(e){return s.a.createElement("p",{className:"card-text"},e)})),s.a.createElement(i.b,{to:e.to},s.a.createElement(h.a,{className:"custom-btn"},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438")))))},y=a(482),O=a(13),j=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var l;return Object(n.a)(this,a),(l=t.call(this,e)).handleDownload=l.handleDownload.bind(Object(u.a)(l)),l.uploadDisciplines=l.uploadDisciplines.bind(Object(u.a)(l)),l}return Object(l.a)(a,[{key:"handleDownload",value:function(){fetch("/db/download",{headers:Object(O.a)()}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=new Blob([JSON.stringify(e,null,2)],{type:"text/json"});Object(y.saveAs)(t,"elqueue_db.json")}))}},{key:"uploadDisciplines",value:function(){var e=document.getElementById("fileinput"),t=new FormData;t.append("file",e.files[0]),fetch("/db/upload/disciplines",{method:"POST",headers:{Authorization:"JWT "+localStorage.getItem("accesstoken")},body:t}).then((function(e){return e.json()}))}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(d.a,{className:"custom-paper bg-light p-3 col-12 col-lg-10"},s.a.createElement(b.a,null,s.a.createElement(g,{header:"\u0421\u043f\u0438\u0441\u043e\u043a \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439",description:["\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0441\u043f\u0438\u0441\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439","\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435","\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435","\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"],to:"/users"}),s.a.createElement(g,{header:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0435\u0439",description:["\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0441\u043f\u0438\u0441\u043a\u0430 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u0445 \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0435\u0439","\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435","\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435"],to:"/teachers",className:"custom-block"}),s.a.createElement(g,{header:"\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d",description:["\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0441\u043f\u0438\u0441\u043a\u0430 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u0445 \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d","\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435","\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435","\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"],to:"/disciplines"}),s.a.createElement(g,{header:"\u0421\u0435\u043a\u0440\u0435\u0442\u043d\u044b\u0435 \u043a\u043b\u044e\u0447\u0438",description:["\u0423\u043f\u0440\u0430\u0432\u0435\u043d\u0438\u0435 \u043a\u043b\u044e\u0447\u0430\u043c\u0438","\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435","\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435"],to:"/secretkeys"}),s.a.createElement(p.a,{md:4},s.a.createElement("div",{className:"custom-card mb-4 shadow-sm"},s.a.createElement("center",{className:"pt-3"},s.a.createElement("h4",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043e\u0432")),s.a.createElement("hr",null),s.a.createElement("div",{className:"card-body"},s.a.createElement("input",{type:"file",id:"fileinput",className:"mb-3 p-3 custom-card bg-white",accept:".csv"}),s.a.createElement("div",{className:"d-flex justify-content-between"},s.a.createElement(h.a,{className:"custom-btn btn-info",onClick:this.uploadDisciplines},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"),s.a.createElement(f.a,{placement:"bottom",overlay:s.a.createElement(E.a,null,"CSV \u0444\u0430\u0439\u043b \u0441\u043e \u0441\u0442\u0440\u043e\u043a\u0430\u043c\u0438 \u0444\u043e\u0440\u043c\u0430\u0442\u0430: short_name, full_name")},s.a.createElement("div",{className:"mr-0 mr-lg-3"},s.a.createElement(v.a,{src:"static/img/info.svg",width:"24"}))))))),s.a.createElement(p.a,{md:4},s.a.createElement("div",{className:"custom-card mb-4 shadow-sm"},s.a.createElement("center",{className:"pt-3"},s.a.createElement("h4",null,"\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u0431\u0430\u0437\u0443 \u0434\u0430\u043d\u043d\u044b\u0445")),s.a.createElement("hr",null),s.a.createElement("div",{className:"card-body"},s.a.createElement(h.a,{onClick:this.handleDownload,className:"custom-btn btn-info"},"JSON")))))))}}]),a}(r.Component),T=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return s.a.createElement(d.a,{className:"p-3 col-12"},s.a.createElement(j,null))}}]),a}(r.Component),w=a(174),N=a(483),D=a.n(N),R={body:{emptyDataSourceMessage:"\u041d\u0435\u0442 \u0437\u0430\u043f\u0438\u0441\u0435\u0439",addTooltip:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",deleteTooltip:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",editTooltip:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c",filterRow:{filterTooltip:"\u0424\u0438\u043b\u044c\u0442\u0440"},editRow:{deleteText:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c?",cancelTooltip:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",saveTooltip:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"}},grouping:{placeholder:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435 \u043a\u043e\u043b\u043e\u043d\u043e\u043a ...",groupedBy:"\u0421\u0433\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u0430\u043d \u043f\u043e:"},header:{actions:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"},pagination:{labelDisplayedRows:"{from}-{to} \u0438\u0437 {count}",labelRowsSelect:"\u0421\u0442\u0440\u043e\u043a",labelRowsPerPage:"\u0421\u0442\u0440\u043e\u043a \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435:",firstAriaLabel:"\u041f\u0435\u0440\u0432\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",firstTooltip:"\u041f\u0435\u0440\u0432\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",previousAriaLabel:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",previousTooltip:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",nextAriaLabel:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",nextTooltip:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",lastAriaLabel:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",lastTooltip:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430"},toolbar:{addRemoveColumns:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c/\u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0435\u0446",nRowsSelected:"{0} \u0421\u0442\u0440\u043e\u043a \u0432\u044b\u0431\u0440\u0430\u043d\u043e",showColumnsTitle:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043a\u043e\u043b\u043e\u043d\u043a\u0438",showColumnsAriaLabel:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043a\u043e\u043b\u043e\u043d\u043a\u0438",exportTitle:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",exportAriaLabel:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",exportName:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u043a CSV",searchTooltip:"\u041f\u043e\u0438\u0441\u043a",searchPlaceholder:"\u041f\u043e\u0438\u0441\u043a"}};var S=function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement(D.a,{style:{fontFamily:"Nunito",borderRadius:20,boxShadow:"0px 3px 5px rgb(224, 224, 224)",animation:"appear .6s"},isLoading:e.isLoading,localization:R,title:e.table_name,columns:e.columns,data:e.data,editable:{onRowAdd:function(t){return new Promise((function(a){a(),e.editTable("ADD_RECORD",t)}))},onRowUpdate:function(t,a){return new Promise((function(n){n();var l=Object.assign({},a);delete l.tableData,JSON.stringify(t)!==JSON.stringify(l)&&e.editTable("UPD_RECORD",t)}))},onRowDelete:function(t){return new Promise((function(a){a(),delete Object.assign({},t).tableData,e.editTable("DEL_RECORD",t)}))}}}))},k=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var l;return Object(n.a)(this,a),(l=t.call(this,e)).updateTable=l.updateTable.bind(Object(u.a)(l)),l.editTable=l.editTable.bind(Object(u.a)(l)),l.state={table:{},isLoading:!0},l}return Object(l.a)(a,[{key:"updateTable",value:function(){var e=this;this.setState({isLoading:!0}),fetch("/db/".concat(this.props.match.params.table_name),{headers:Object(O.a)()}).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({isLoading:!1}),t.success?e.setState({table:{columns:t.table.columns,data:t.table.data}}):alert(t.causeOfError)}))}},{key:"editTable",value:function(e,t){var a=this;this.setState({isLoading:!0}),fetch("/db/".concat(this.props.match.params.table_name),{method:"POST",headers:Object(O.a)(),body:JSON.stringify({task:e,data:t})}).then((function(e){return e.json()})).then((function(e){console.log(e),a.setState({isLoading:!1}),e.success?a.updateTable():alert(e.causeOfError)}))}},{key:"componentDidMount",value:function(){this.updateTable(),console.log(111)}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(d.a,{className:"p-3"},"secretkeys"===this.props.match.params.table_name&&s.a.createElement(d.a,{className:"custom-paper mb-2 p-3"},s.a.createElement(w.a,{className:"mb-0",onSubmit:function(t){e.editTable("GEN_RECORD",{num:t.currentTarget.num.value}),t.preventDefault(),t.stopPropagation()}},s.a.createElement(w.a.Row,null,s.a.createElement(w.a.Group,{className:"mb-0"},s.a.createElement(w.a.Control,{name:"num",type:"number",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",min:"0",defaultValue:"0",className:"custom-textform"})),s.a.createElement(h.a,{variant:"primary",type:"submit",className:"btn custom-btn ml-3 mb-auto"},"\u0421\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c")))),s.a.createElement(S,{isLoading:this.state.isLoading,editTable:this.editTable,table_name:this.props.match.params.table_name,columns:this.state.table.columns,data:this.state.table.data})))}}]),a}(r.Component);var C=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return s.a.createElement(i.a,{basename:"/admindb"},s.a.createElement(m.d,null,s.a.createElement(m.b,{exact:!0,path:"/",component:T}),s.a.createElement(m.b,{path:"/:table_name",component:k}),s.a.createElement(m.a,{strict:!0,to:"/"})))}}]),a}(r.Component);t.default=C}}]);
//# sourceMappingURL=4.5efcefe2.chunk.js.map